##
## shared ZenMagick store container
##
## NOTE: This file is generated (and may be re-written) automatically - edit at own risk.
##

parameters:
  kernel.root_dir: %zenmagick.cacheBaseDir%/kernel
  kernel.cache_dir: %zenmagick.cacheBaseDir%
  kernel.debug: false
  kernel.bundles: %zenmagick.bundles%
  zenmagick.installationPath: '<?php echo dirname(zenmagick\base\Runtime::getInstallationPath()) ?>'
  zenmagick.cacheIds: ['transientCache', 'persistentCache', 'servicesCache', 'templateCache']
  zenmagick.cacheBaseDir: '<?php echo dirname(zenmagick\base\Runtime::getInstallationPath())."/cache/zenmagick" ?>'

services:
  ## generic caches
  transientCache:
    class: zenmagick\base\cache\MemoryCache
    scope: prototype
    calls:
      - [init, ['global', {}]]
  persistentCache:
    class: zenmagick\base\cache\FileCache
    scope: prototype
    calls:
      - [init, ['global', {cacheTTL: 300, cacheDir: '%zenmagick.cacheBaseDir%/files/'}]]

  ## explicit caches
  servicesCache:
    class: zenmagick\base\cache\MemoryCache
    scope: container
    calls:
      - [init, ['services', {}]]
  templateCache:
    class: zenmagick\base\cache\FileCache
    scope: container
    calls:
      - [init, ['services', {cacheTTL: 300, cacheDir: '%zenmagick.cacheBaseDir%/templates/'}]]

  ZMThemes:
    class: ZMThemes
    scope: container
    calls:
      - [setCache, [@servicesCache]]
  themeService: @ZMThemes
  ZMManufacturers:
    class: ZMManufacturers
    scope: container
    calls:
      - [setCache, [@servicesCache]]
  manufacturerService: @ZMManufacturers
  ZMProducts:
    class: ZMProducts
    scope: container
    calls:
      - [setCache, [@servicesCache]]
  productService: @ZMProducts
  ZMCategories:
    class: ZMCategories
    scope: container
    calls:
      - [setCache, [@servicesCache]]
  categoryService: @ZMCategories
  ZMSimpleSavantCache:
    class: ZMSimpleSavantCache
    scope: container
    calls:
      - [setCache, [@templateCache]]

# database configuration settings
doctrine:
  dbal:
    connections:
      default:
        driver: pdo_mysql
        dbname: '<?php echo DB_DATABASE ?>'
        host: '<?php echo DB_SERVER ?>'
        port: null
        user: '<?php echo DB_SERVER_USERNAME ?>'
        password: '<?php echo DB_SERVER_PASSWORD ?>'
        charset: utf8
        #collation: null @todo mysql collation setting
        unix_socket: null
  orm:
    auto_generate_proxy_classes: true
    proxy_namespace: zenmagick.proxies
    proxy_dir: %zenmagick.cacheBaseDir%/doctrine/orm/proxies
    entity_managers:
      default:

        mappings:
          zenmagick:
            is_bundle: false
            type: xml
            # @todo will eventually be the namespace zenmagick\apps\store\entities
            prefix: ZM
            dir: %zenmagick.installationPath%/zenmagick/shared/model

swiftmailer:
  transport: '<?php echo ("PHP" == EMAIL_TRANSPORT ? "mail" : EMAIL_TRANSPORT) ?>'
  username: '<?php echo EMAIL_SMTPAUTH_MAILBOX ?>'
  password: '<?php echo EMAIL_SMTPAUTH_PASSWORD ?>'
  host: '<?php echo EMAIL_SMTPAUTH_MAIL_SERVER ?>'
  port: '<?php echo EMAIL_SMTPAUTH_MAIL_SERVER_PORT ?>'
  encryption: ~
  auth_mode: ~
  spool:
    type: file
    path: %zenmagick.cacheBaseDir%/swiftmailer/spool
  sender_address: ~
  antiflood:
    threshold: 99
    sleep: 0
  delivery_address: ~
  disable_delivery: ~
  logging: true
