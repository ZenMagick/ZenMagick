#
# storefront default settings
#

## general settings
zenmagick:
  version: ${zenmagick.version}

  ## core
  core:
    ## security
    security:
      defaultAuthenticationProvider: ZMZenCartAuthentication

    ## fs
    fs:
      permissions:
        fix: true
        defaults:
          file: 0666
          folder: 0777

  ## base
  base:
    ## locales
    locales:
      locale: en_NZ
      handler: zenmagick\base\locales\handler\PomoLocale

    ## events
    events:
      listeners:
        ## TODO: these should be swapped
        - zenmagick\apps\store\StoreEventListener
        - zenmagick\http\EventListener
        - zenmagick\apps\store\storefront\utils\EventFixes
    ## logging
    logging:
      level: INFO
      enabled: false
      handleErrors: true

  ## mvc
  mvc:
    # enable/disable transaction support in request processing
    transactions:
      enabled: false

    ## templates
    templates:
      ext: .php

    ## request
    request:
      missingPage: page_not_found.php

    ## html
    html:
      xhtml: true
      charset: utf-8
      tokenSecuredForms: login
 
    ## view
    view:
      defaultLayout: default_layout.php

    ## resultlist
    resultlist:
      defaultPagination: 10

  http:
    #html
    html:
      xhtml: true
    ## request
    request:
      idName: main_page
      invalidSession: cookie_usage
      login: login
      enforceSecure: true
    controller:
      namespaces:
        - zenmagick\apps\store\storefront\controller
    ## sacs
    sacs:
      handler:
        - ZMZenCartAccountSacsHandler
  ## bundles
  bundles:
    ZenCartBundle: zenmagick\apps\store\bundles\ZenCartBundle\ZenCartBundle
    DoctrineBundle: Doctrine\Bundle\DoctrineBundle\DoctrineBundle 
    SwiftmailerBundle: Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle 

apps:
  store:
    #default access level; same as anonymous
    defaultAccessLevel: null
    # sanitize attributes when handling product submissions (add to cart, etc)
    isSanitizeAttributes: true

    staticContent: true
    storefront:
      domain: null
    themes:
      default: base
    # verify category path
    verifyCategoryPath: false

# enable/disable web stats; this does not include login counts, etc, but product views and such
isLogPageStats: true

## Layout
# allow unsubscribe without logging in
isAllowAnonymousUnsubscribe: true

## Error pages, other global page settings
# static homepage
staticHome: null
# use category page
isUseCategoryPage: false

## optional account data
isAccountNickname: false

## store info
storeDefaultLanguageId: 1


## guest checkout
isGuestCheckout: false,
isLogoffGuestAfterOrder: false,
isGuestCheckoutAskAddress: true

## formatting and other defaults

# comma separated lists
resultListProductFilter: 'ZMCategoryFilter,ZMManufacturerFilter'
resultListProductSorter: 'ZMProductSorter'

#  price calculation decimals for rounding
calculationDecimals: 4

# HTML generation / validation
isJSTarget: true
isAutoJSValidation: true

## Meta tag options

# keyword delimiter
metaTagKeywordDelimiter: ', '
# delimiter for meta tag crumbtrail content
metaTagCrumbtrailDelimiter: ' - '
# meta tag title delimiter
metaTitleDelimiter: ' :: '
# setting prefix to lookup custom meta tag data; example 'title_index'
metaTitlePrefix: title_
# add store name to title
isStoreNameInTitle: true

# database configuration settings
# @todo allow symbolic names for the fully qualified classes mentioned here?
doctrine:
  dbal:
    logging: true # @todo has to be true for pageStats plugin to work
    logger_class: Doctrine\DBAL\Logging\DebugStack
    connections:
      default:
        driver: pdo_mysql
        dbname: zenmagick
        host: localhost
        port: null
        user: root
        password: null
        prefix:
        charset: utf8
        collation: null
        unix_socket: null
  orm:
    auto_generate_proxy_classes: true
    proxy_dir: proxies # @todo inside cache dir, should  we specify that here?
    proxy_namespace: zenmagick\apps\store\proxies
    metadata_cache_driver: Doctrine\Common\Cache\ArrayCache
    query_cache_driver: Doctrine\Common\Cache\ArrayCache
    result_cache_driver: Doctrine\Common\Cache\ArrayCache
    mappings:
      zenmagick:
        type: annotation
        # @todo will eventually be the namespace zenmagick\apps\store\entities
        prefix: ZM
        dir:
          - shared/model/account
          - shared/model/catalog
          - shared/model/checkout/coupons
          - shared/model/checkout
          - shared/model/forms
          - shared/model/layout
          - shared/model/order
          - shared/model
